<tool id="astronomical_archives" name="Astronomical Archives (IVOA)" version="0.10.22" profile="24.2">
    <description>queries astronomical archives through Virtual Observatory protocols</description>
    <edam_operations>
        <edam_operation>operation_0224</edam_operation>
    </edam_operations>
    <requirements>
        <requirement type="package" version="7.1.0">astropy</requirement>
        <requirement type="package" version="1.7">pyvo</requirement>
    </requirements>
    <command detect_errors="exit_code">
      <![CDATA[
        mkdir fits

        &&

        python '$__tool_directory__/astronomical_archives.py' '$output' '$output_csv' '$output_html' '$output_basic_html' '$output_error' inputs.json
      ]]>
    </command>
    <configfiles>
        <inputs name="inputs" filename="inputs.json" />
    </configfiles>
    <inputs>
        <conditional name="archive_selection">
            <param name="archive_type" type="select" label="Archive Selection">
              <option value="archive">Query specific IVOA archive</option>
              <option value="registry">Query all matching IVOA archives</option>
              <option value="custom">Query custom TAP archive</option>
            </param>
            <when value="registry">
              <param name="keyword" type="text" label="Keyword" />
              <param name="service_type" type="select" label="Service type">
                <option value="TAP" selected="true">TAP: Tables</option>
              </param>
              <param name="wavebands" type="select" label="Wavebands">
                <option value="all" selected="true">All</option>
                <option value="radio">Radio</option>
                <option value="millimeter">Millimeter</option>
                <option value="infrared">Infrared</option>
                <option value="optical">Optical</option>
                <option value="uv">UV</option>
                <option value="euv">EUV</option>
                <option value="x-ray">X-ray</option>
                <option value="gamma-ray">Gamma-ray</option>
              </param>
            </when>
            <when value="archive">
              <param name="archive" type="select" label="Astronomical archives">
                <options from_data_table="astronomical_archives" />
              </param>
            </when>
            <when value="custom">
              <param name="access_url" type="text" label="TAP archive access url">
                <validator type="regex" message="URL seems invalid">^https?://[A-Za-z0-9]([A-Za-z0-9-\.]{0,61}[A-Za-z0-9])?\.[A-Za-z]{2,6}(:\d+)?(/[^\s]*)?$</validator>
              </param>
            </when>
        </conditional>
        <section name="query_section" title="Query selection" expanded="true">
          <conditional name="query_selection">
            <param name="query_type" type="select" label="ADQL Query Selection">
              <option value="none">No specific query (first n files from archive)</option>
              <option value="obscore_query">IVOA obscore table query builder</option>
              <option value="raw_query">Raw ADQL query builder</option>
            </param>
            <when value="none"></when>
            <when value="obscore_query">
              <param name="target_name" type="text" label="Observation target name" help="Typically name of the astronomical object observed" />
              <section name="cone_section" title="Cone search parameters">
                <conditional name="cone_search_target_selection">
                  <param name="target_selection" type="select" label="Search center">
                    <option value="coordinates">Coordinates</option>
                    <option value="object_name">Source name</option>
                  </param>
                  <when value="coordinates">
                    <param name="ra" type="text" label="Right ascension" optional="false" help="In degree e.g. 27.1" />
                    <param name="dec" type="text" label="Declination" optional="false" help="In degree e.g. 30.5" />
                  </when>
                  <when value="object_name">
                    <param name="cone_object_name" type="text" label="Observation target name" optional="false" help="e.g. mrk 421" />
                  </when>
                </conditional>
                <param name="radius" type="text" label="Search radius" optional="false" help="In degree e.g. 0.1"/>
              </section>
              <param name="t_min" type="float" optional="true" label="Start time in MJD" />
              <param name="t_max" type="float" optional="true" label="Stop time in MJD" />
              <param name="dataproduct_type" type="text" label="Data product type" optional="true" help="Logical data product type (link to reference in Help section)">
                <option value="image">Image</option>
                <option value="cube">Cube</option>
                <option value="dynamic-spectrum">Dynamic spectrum</option>
                <option value="event-list">Event list</option>
                <option value="light-curve">Light curve</option>
                <option value="measurements">Measurements</option>
                <option value="polarization-cube">Polarization cube</option>
                <option value="polarization-resolved-dataset">Polarization resolved dataset</option>
                <option value="polarized-spectrum">Polarized spectrum</option>
                <option value="sed">SED</option>
                <option value="slit-spectrum">Slit spectrum</option>
                <option value="spatially-resolved-dataset">Spatially resolved dataset</option>
                <option value="spectral-cube">Spectral cube</option>
                <option value="spectrally-resolved-dataset">Spectrally resolved dataset</option>
                <option value="spectrum">Spectrum</option>
                <option value="temporally-resolved-dataset">Temporally resolved dataset</option>
                <option value="time-cube">Time cube</option>
                <option value="timeseries">Time series</option>
                <option value="velocity-curve">Velocity curve</option>
                <option value="visibility">Visibility</option>
              </param>
              <param name="obs_collection" type="text" label="Collection" help="Observation collection name" />
              <param name="obs_title" type="text" label="Observation title (archive specific)" />
              <param name="obs_id" type="text" label="Observation Id" />
              <param name="facility_name" type="text" label="Facility name" help="Name of the facility used for this observation" />
              <param name="instrument_name" type="text" label="Instrument name" help="Name of the instrument used for this observation" />
              <param name="em_min" type="float" optional="true"  label="Start of the energy range, vacuum wavelength in meters" />
              <param name="em_max" type="float" optional="true"  label="Stop of the energy range, vacuum wavelength in meters" />
              <param name="obs_publisher_id" type="text" label="Publisher dataset ID" />
              <param name="s_fov" type="text" label="Diameter (bounds) of the covered region (deg)" />
              <param name="calibration_level" type="select" label="Calibration level (-1, 0, 1, 2, 3, 4, 5)" >
                <option value="none">None</option>
                <option value="-1">-1</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
              </param>
              <param name="order_by" type="select" label="Order by" help="Field to use for ordering the results">
                <option value="none" selected="true">No specific order</option>
                <option value="size" >Order by size (Ko)</option>
                <option value="collection" >Order by collection</option>
                <option value="object" >Order by Target Name, alphabetically</option>
              </param>
            </when>
            <when value="raw_query">
              <param name="table" type="text" label="Table name" help="Name of the table you want to query (FROM clause)" />
              <section name="where_clause" title="WHERE clause (field = value)" expanded="false">
                <param name="where_field" type="text" label="WHERE field" help="WHERE **field** = value" />
                <param name="where_condition" type="text" label="WHERE value" help="WHERE field = **value**" />
              </section>
              <param name="url_field" type="text" label="Url field" help="Table field containing the url of the file to download" />
            </when>
          </conditional>
        </section>
        <section name="output_section" title="Output selection" expanded="true">
          <param name="number_of_files" type="integer" value="1" min="1" max="100" label="Number of files or urls to download" help="Beware of disk space usage when downloading large number of files!" />
          <param name="output_selection" type="select" label="Tool output type selection" multiple="true" display="checkboxes">
            <option selected="true" value="c">Return URL list as CSV</option>
            <option value="i">Download files</option>
            <option value="h">Return URL list in extended HTML (requires HTML rendering permission, see help)</option>
            <option value="b">Return URL list as HTML</option>
          </param>
        </section>
    </inputs>
    <outputs>
        <data name="output" format="fits" label="${tool.name} -> File from ${archive_selection.archive_type} search:" >
          <discover_datasets pattern="__designation_and_ext__" directory="fits" visible="true" format="fits" />
          <filter>'i' in output_section['output_selection']</filter>
          <filter>output_section['output_selection'] is not None</filter>
        </data>
        <data name="output_csv" format="txt" label="${tool.name} -> CSV Manifest:">
          <filter>'c' in output_section['output_selection']</filter>
          <filter>output_section['output_selection'] is not None</filter>
        </data>
        <data name="output_html" format="html" label="${tool.name} -> HTML Preview:">
          <filter>'h' in output_section['output_selection']</filter>
          <filter>output_section['output_selection'] is not None</filter>
        </data>
        <data name="output_basic_html" format="html" label="${tool.name} -> Basic HTML Preview:">
          <filter>'b' in output_section['output_selection']</filter>
          <filter>output_section['output_selection'] is not None</filter>
        </data>
        <data name="output_error" format="txt" label="${tool.name} -> Query Summary:" />
    </outputs>
    <tests>
        <test expect_num_outputs="2">
            <section name="output_section">
              <param name="output_selection" value="i"/>
              <param name="number_of_files" value="1"/>
            </section>
            <conditional name="archive_selection">
                <param name="archive_type" value="registry"/>
                <param name="keyword" value="apertif"/>
            </conditional>
            <section name="query_section">
              <conditional name="query_selection">
                  <param name="query_type" value="obscore_query" />
                  <param name="dataproduct_type" value="image" />
                  <param name="obs_title" value="190807041_AP_B001" />
              </conditional>
            </section>
            <output name="output" count="1">
              <assert_contents>
                  <has_text_matching expression="SIMPLE  =" />
              </assert_contents>
            </output>
        </test>
        <test expect_num_outputs="2">
            <section name="output_section">
              <param name="output_selection" value="c"/>
              <param name="number_of_files" value="1"/>
            </section>
            <conditional name="archive_selection">
                <param name="archive_type" value="registry"/>
                <param name="keyword" value="apertif"/>
            </conditional>
            <section name="query_section">
              <conditional name="query_selection">
                  <param name="query_type" value="obscore_query" />
                  <param name="dataproduct_type" value="image" />
                  <param name="obs_title" value="190807041_AP_B001"/>
              </conditional>
            </section>
            <output name="output_csv" count="1">
              <assert_contents>
                  <has_line line="https://vo.astron.nl/getproduct/APERTIF_DR1/190807041_AP_B001/image_mf_02.fits," />
              </assert_contents>
            </output>
        </test>
        <test expect_num_outputs="2">
            <section name="output_section">
              <param name="output_selection" value="c"/>
              <param name="number_of_files" value="1"/>
            </section>
            <conditional name="archive_selection">
                <param name="archive_type" value="registry"/>
                <param name="keyword" value="apertif"/>
            </conditional>
            <section name="query_section">
              <conditional name="query_selection">
                  <param name="query_type" value="obscore_query" />
                  <param name="dataproduct_type" value="image" />
                  <param name="obs_title" value="190807042_AP_B006"/>
              </conditional>
            </section>
            <output name="output_csv" count="1">
              <assert_contents>
                  <has_line line="https://vo.astron.nl/getproduct/APERTIF_DR1/190807042_AP_B006/image_mf_04.fits," />
              </assert_contents>
            </output>
        </test>
        <test expect_num_outputs="2">
          <section name="output_section">
            <param name="output_selection" value="c"/>
            <param name="number_of_files" value="1"/>
          </section>
          <conditional name="archive_selection">
              <param name="archive_type" value="registry"/>
              <param name="keyword" value="simbad"/>
          </conditional>
          <section name="query_section">
            <conditional name="query_selection">
                <param name="query_type" value="obscore_query" />
            </conditional>
          </section>
          <output name="output_error" count="1">
            <assert_contents>
                <has_text text="No obscore table in the archive"/>
            </assert_contents>
          </output>
        </test>
        <test expect_num_outputs="2">
          <section name="output_section">
            <param name="output_selection" value="c"/>
            <param name="number_of_files" value="1"/>
          </section>
          <conditional name="archive_selection">
              <param name="archive_type" value="registry"/>
              <param name="keyword" value="apertif"/>
          </conditional>
          <section name="query_section">
            <conditional name="query_selection">
                <param name="query_type" value="raw_query" />
                <param name="table" value="unknown_table" />
                <param name="url_field" value="unknown_field" />
            </conditional>
          </section>
          <output name="output_error" count="1">
            <assert_contents>
                <has_text text="Error in query"/>
            </assert_contents>
          </output>
        </test>
        <test expect_num_outputs="2">
          <section name="output_section">
            <param name="output_selection" value="c"/>
            <param name="number_of_files" value="1"/>
          </section>
          <conditional name="archive_selection">
              <param name="archive_type" value="custom"/>
              <param name="access_url" value="https://datalab.noirlab.edu/tap"/>
          </conditional>
          <section name="query_section">
            <conditional name="query_selection">
                <param name="query_type" value="raw_query" />
                <param name="table" value="allwise.source" />
                <param name="url_field" value="random_id" />
            </conditional>
          </section>
          <output name="output_csv" count="1">
            <assert_contents>
                <has_text_matching expression=".*\S+.*" />
            </assert_contents>
          </output>
        </test>
        <test expect_num_outputs="2">
          <section name="output_section">
            <param name="output_selection" value="c"/>
            <param name="number_of_files" value="1"/>
          </section>
          <conditional name="archive_selection">
              <param name="archive_type" value="custom"/>
              <param name="access_url" value="http://voparis-tap-he.obspm.fr/tap"/>
          </conditional>
          <section name="query_section">
            <conditional name="query_selection">
                <param name="query_type" value="obscore_query" />
            </conditional>
          </section>
          <output name="output_csv" count="1">
            <assert_contents>
                <has_text_matching expression=".*\S+.*" />
            </assert_contents>
          </output>
        </test>
    </tests>
    <help>

.. class:: infomark

The help section contains general tips on how to use the tool as well as a list of some of the archives available through the tool with a description of their content

.. class:: infomark

For the non basic html report to be rendered correctly the tool needs to be allowed to render html in : Admin -> Tool Management -> Manage Allowlist

**What it does**

This tool lets you explore and query different archives available in the IVOA registry of registries.

You can choose to download a list of files url matching your search parameters or directly download the files alongside the manifest containing the urls you can also choose to preview the matching urls values in an html report

The html report will list all the fields of the queried table and let you preview the different files when a preview is available

You have the choice between letting the tool select the archive matching your search criteria or you can directly choose the archive you want to query

**How to use it**

OUTPUT SELECTION

The file type and number of files selection let you choose if you want to download the chosen files alongside the url manifest or if you want to preview the urls in an html report and how many of them will be listed and downloaded

ARCHIVE SELECTION

The archive selection lets you decide what archive will be queried :

If you want the tool to select an archive for you : select "Query IVOA Registry" and enter a specific keyword describing the kind of archive you are looking for (for instance "hess" or "apertif")
The tool will choose the first archive matching your criterias

If you already know what archive you want to query : select "Query specific IVOA archive" and choose the corresponding archive

QUERY SELECTION

The query selection lets you decide what kind of ADQL query will be run against the chosen archive

The two first choices ("No specific query" and "IVOA obscore table") assume that an obscore table (as specified in the IVOA guidelines) is present, if the service has not implemented an obscore table you will need to run a custom query against a specific exposed table

If you don't want to run any specific query choose "No specific query", this choice will run a basic "SELECT" query and return the results

If you want to run an ADQL query against the obscore table of the archive choose "IVOA obscore table", that will let you specify the value of some of the most used mandatory obscore field

If the archive does not have an obscore table or if you want to run a very specific query choose "Raw ADQL query builder" for that to work you will need to know the name of the table you want to query and the field containing the access urls if you want to download the files

**Example**

Browsing a specific archive to find and download a specific file (LoLSS collection from Astron archive) :

Choose "Download urls preview (html format)" from "File type selection" and put 10 in the number of files you want to preview

In Archive Selection choose "Query specific IVOA archive" and then select "The VO @ Astron"

In Query Selection choose "IVOA obscore query builder" and put "LoLSS" in the collection field

Once run the tool should have created an html report containing a number of files from the LoLSS collection, explore the report by clicking the "Visualize" icon and copy the "obs_title" of one of the files

Repeat the previous steps except that this time you will choose "Download urls + files" with 1 file to download and enter the obs_title in the obs_title field

The tool should now be downloading this specific file alongside a csv file containing the download url

**The tool doesn't find any files**

There are several reason for the tool to output a file explaining that no files matching your criterias were found:


Everything ran fine but no files were matching your criterias

The archive does not have an obscore table (if you ran an obscore query)

The files access urls are not working properly

The table or field you choose in your raw ADQL query doesn't exist or does not contain a download url

The selected archive is not available


In most cases the best course of action is to try to download the urls only and if some are returned to preview them and to manually try their download urls

Another possibility is to manually review the TAP schema of the archive to craft a custom ADQL query and preview the results

-----

**References**

Obscore Table IVOA specifications: https://www.ivoa.net/documents/ObsCore/20160224/WD-ObsCore-v1.1-20160224.pdf

Obscore Table dataproduct_type values specifications: https://www.ivoa.net/rdf/product-type/2023-06-26/product-type.html

ADQL specifications: https://www.ivoa.net/documents/ADQL/20180112/PR-ADQL-2.1-20180112.html

IVOA VO protocol summary : https://ivoa.net/deployers/intro_to_vo_concepts.html

-----

**List of archives description**

-----

**AIP GAVO TAP** http://gavo.aip.de/tap AIP DaCHS TAP service

-----

The AIP DaCHS's TAP end point. The Table Access
Protocol (TAP) lets you execute queries against our database tables,
inspect various metadata, and upload your own data. It is thus the
VO's premier way to access public data holdings.

Tables exposed through this endpoint include: dens256, fof, redshifts from the bolshoi schema, columns, services, tables from the glots schema, fof, fofmtree, fofparticles, particles85, redshifts, treesnapnums from the mdr1 schema, rave_dr4 from the ravedr4 schema, alt_identifier, authorities, capability, g_num_stat, interface, intf_param, registries, relationship, res_date, res_detail, res_role, res_schema, res_subject, res_table, resource, stc_spatial, stc_spectral, stc_temporal, subject_uat, table_column, tap_table, validation from the rr schema, columns, groups, key_columns, keys, schemas, tables from the tap_schema schema.

-----

**STScI CAOMTAP** vao.stsci.edu/CAOMTAP/TapService.aspx MAST STScI CAOM and ObsCore TAP service

-----

The MAST Archive at STScI TAP end point for observational data, saved in the Common Archive Data Model format and made available through the ObsCore limited view.

The Table Access Protocol (TAP) lets you execute queries against our database tables, and inspect various metadata.  Upload is not currently supported.

Missions and projects with data available through the CAOMTAP service include:
BEFS, EUVE, FUSE, GALEX, HLA, HST, HUT, IUE, JWST, K2, KEPLER, PS1 (PanSTARRS 1) Data Release 2, SPITZER_SHA, SWIFT, TESS, TUES, WUPPE.

High Level Science Products (HLSPs) available include:
3D-DASH, 3DHST, CDIPS, CLASSY, DIAMANTE, ELEANOR, EVEREST, GSFC-ELEANOR-LITE, HALO, HFF-DEEPSPACE, hlsp_3cr, hlsp_acsggct, hlsp_andromeda, hlsp_angrrr, hlsp_angst, hlsp_appp, hlsp_borg, hlsp_candels, hlsp_carina, hlsp_clash, hlsp_coma, hlsp_cosmos, hlsp_frontier, hlsp_gems, hlsp_ghosts, hlsp_goods, hlsp_goodsnic, hlsp_heritage, hlsp_hippies, hlsp_hlastarclusters, hlsp_hudf09, hlsp_hudf12, hlsp_ison, hlsp_legus, hlsp_m82, hlsp_m83mos, hlsp_orion, hlsp_phat, hlsp_sgal, hlsp_sm4ero, hlsp_stages, hlsp_starcat, hlsp_udf, hlsp_uvudf, hlsp_wfc3ers, hlsp_wisp, hlsp_xdf, IRIS, K2SC, K2SFF, K2VARCAT, KBONUS-APEXBA, KEPSEISMIC, PATHOS, PSFK2, QLP, TASOC, TESS-SPOC, ULLYSES

Tables exposed through this endpoint include the ObsCore (version 1.1) view of our CAOM (version 2.4) database, as well as all other CAOM tables

-----

**HSC TAP** https://mast.stsci.edu/vo-tap/api/v0.1/hsc/ MAST STScI Hubble Source Catalog Version 3 (HSCv3) TAP service

-----

The MAST Archive at STScI TAP end point for the Hubble Source Catalog, version 3.1. The Hubble Source Catalog (HSC) is designed to optimize science from the Hubble Space Telescope by combining the tens of thousands of visit-based source lists in the Hubble Legacy Archive (HLA) into a single master catalog. The Hubble Source Catalog version 3.1 also provides proper motions for over 400,00 stars in the augmented Sagittarius Window Eclipsing Extrasolar Planet Search (SWEEPS) HST field, and the Hubble Catalog of Variables (HCV).

The Table Access Protocol (TAP) lets you execute queries against our database tables, and inspect various metadata.  Upload is not currently supported.

-----

**HSCv3 TAP** https://mast.stsci.edu/vo-tap/api/v0.1/hsc/ MAST STScI Hubble Source Catalog Version 3 (HSCv3) TAP service

-----

The MAST Archive at STScI TAP end point for the Hubble Source Catalog, version 3.1. The Hubble Source Catalog (HSC) is designed to optimize science from the Hubble Space Telescope by combining the tens of thousands of visit-based source lists in the Hubble Legacy Archive (HLA) into a single master catalog. The Hubble Source Catalog version 3.1 also provides proper motions for over 400,00 stars in the augmented Sagittarius Window Eclipsing Extrasolar Planet Search (SWEEPS) HST field, and the Hubble Catalog of Variables (HCV).

The Table Access Protocol (TAP) lets you execute queries against our database tables, and inspect various metadata.  Upload is not currently supported.

-----

**MissionMAST TAP** vao.stsci.edu/MissionMAST/TapService.aspx MAST STScI MissionMAST TAP service for HST Science Data

-----

The Table Access Protocol (TAP) lets you execute queries against our database tables, and inspect various metadata.  Upload is not currently supported.

-----

**PS1DR2 TAP** vao.stsci.edu/PS1DR2/TapService.aspx MAST STScI PanSTARRS 1 DR2 TAP service

-----

The Panoramic Survey Telescope and Rapid Response System (Pan-STARRS or PS1) is a wide-field imaging facility developed at the University of Hawaii's Institute for Astronomy for a variety of scientific studies from the nearby to the very distant Universe. The PS1 catalog includes measurements in five filters (grizy) covering 30,000 square degrees of the sky north of declination -30 degrees, with typically ~12 epochs for each filter. This interface allows searches for the mean measurements and the deeper stacked measurements from images combining all the epochs. The DR2 release also includes the detection catalog containing all the multi-epoch observations.

The Table Access Protocol (TAP) lets you execute queries against our database tables, and inspect various metadata.  Upload is not currently supported.

-----

**STScI RegTAP** vao.stsci.edu/RegTAP/TapService.aspx MAST STScI Registry TAP service

-----

The MAST Archive at STScI TAP end point for registry metadata.
The Table Access Protocol (TAP) lets you execute queries against our database tables, inspect various metadata, and upload your own data.
Tables exposed through this endpoint include are only for the Registry Relational database

-----

**HLSP CLASSY TAP** vao.stsci.edu/HLSP_CLASSY/TapService.aspx MAST STScI CLASSY HLSP TAP service

-----

The COS Legacy Archive Spectroscopic SurveY (CLASSY): A UV Treasury of Star-Forming Galaxies is a High Level Science Product hosted at the Mikulski Archive for Space Telescopes.

The Table Access Protocol (TAP) lets you execute queries against our database tables, and inspect various metadata.  Upload is not currently supported.

-----

**HLSP ULLYSES TAP** vao.stsci.edu/HLSP_ULLYSES/TapService.aspx MAST STScI ULLYSES HLSP TAP service

-----

The Hubble Space Telescope’s (HST) Ultraviolet Legacy Library of Young Stars as Essential Standards (ULLYSES) program is an ultraviolet spectroscopic library of young high- and low-mass stars in the local universe.

The Table Access Protocol (TAP) lets you execute queries against our database tables, and inspect various metadata.  Upload is not currently supported.

-----

**TIC TAP** https://mast.stsci.edu/vo-tap/api/v0.1/tic MAST STScI TESS Input Catalog TAP service

-----

The MAST Archive at STScI TAP end point for the TESS Input Catalog.The TIC is used to help identify two-minute cadence target selection for the TESS mission, and to calculate physical and observational properties of planet candidates. It is for use by both the TESS science team and the public, and it is periodically updated – the current version is TIC-8. TIC-8 uses the GAIA DR2 catalog as a base and merges a large number of other photometric catalogs, including 2MASS, UCAC4, APASS, SDSS, WISE, etc. There are roughly 1.5 billion stellar and extended sources in TIC-8, containing compiled magnitudes including B, V, u, g, r, i, z, J, H, K, W1-W4, and G.
The TIC can be directly accessed through the Mikulski Archive for Space Telescopes (MAST), using either queries or bulk download.

The Table Access Protocol (TAP) lets you execute queries against our database tables, and inspect various metadata.  Upload is not currently supported.

-----

**UCL Astro TAP** http://astroweb.projects.phys.ucl.ac.uk:8000/tap UCL DaCHS server TAP service

-----

The UCL DaCHS server's TAP end point. The Table Access
Protocol (TAP) lets you execute queries against our database tables,
inspect various metadata, and upload your own data. It is thus the
VO's premier way to access public data holdings.

Tables exposed through this endpoint include: columns, groups, key_columns, keys, schemas, tables from the tap_schema schema, epn_core from the jasmin schema, emptyobscore, obscore from the ivoa schema, epn_core from the mdisc schema.

-----

**ASTRON VO TAP** https://vo.astron.nl/tap The VO @ ASTRON TAP service

-----

The The VO @ ASTRON's TAP end point. The Table Access
Protocol (TAP) lets you execute queries against our database tables,
inspect various metadata, and upload your own data. It is thus the
VO's premier way to access public data holdings.

Tables exposed through this endpoint include: main from the lbcs schema, main, msssvf_img_main from the mvf schema, frb_det, frb_obs from the arts_dr1 schema, img_main, main from the lofartier1 schema, mosaic, source_catalog from the lolss schema, main from the svc schema, img_main, main from the tgssadr schema, main, mom0 from the sauron schema, images, source_catalog from the apertif_dr_bootes schema, columns, groups, key_columns, keys, schemas, tables from the tap_schema schema, hetdex_images, main, main_merged from the hetdex schema, img_main from the msss schema, obscore from the ivoa schema, beam_cubes, calibrated_visibilities, continuum_images, flux_cal_visibilities, pol_cal_visibilities, pol_cubes, raw_visibilities, spectral_cubes from the apertif_dr1 schema, main_gausses, main_sources, mosaics from the lotss_dr2 schema.

-----

**AIASCR TAP** http://vos2.asu.cas.cz/tap AIASCR VO Services TAP service

-----

The AIASCR VO Services's TAP end point. The Table Access
Protocol (TAP) lets you execute queries against our database tables,
inspect various metadata, and upload your own data. It is thus the
VO's premier way to access public data holdings.

Tables exposed through this endpoint include: objcat, objects_observed, objobs_complete, objobs_lightcurves, observation_info from the bextract schema, dim_exposure, dim_observation_objcat, exposure, objcat, objobs_complete, objobs_lightcurves, observation, observation_objcat from the bextract_jan16 schema, reduced_images from the dk154_reduced schema, exposure, objcat, objobs_complete, objobs_lightcurves, observation from the bextract_jan15 schema, columns, groups, key_columns, keys, schemas, tables from the tap_schema schema, dim_exposure, dim_observation_objcat, exposure, objcat, objobs_complete, objobs_lightcurves, objobs_lightcurves_ssap, observation, observation_objcat from the bextract_apr18 schema, data from the ccd700 schema, dim_exposure, dim_observation_objcat, exposure, objcat, objobs_complete, objobs_lightcurves, observation, observation_objcat from the bextract_jan15_v2 schema, emptyobscore, obscore from the ivoa schema, data from the heros schema, reduced_images from the dk154_reduced_jan18 schema, dim_exposure, dim_observation_objcat, exposure, objcat, objobs_complete, objobs_lightcurves, observation, observation_objcat from the bextract_jul15 schema, dim_exposure, dim_observation_objcat, exposure, objcat, objobs_complete, objobs_lightcurves, objobs_lightcurves_ssap, observation, observation_objcat from the bextract_jul16 schema, data from the lamost_dr2 schema, data from the lamost_dr5 schema, data from the lamost_dr3 schema, data from the lamost schema, data from the lamost_dr1 schema, dim_exposure, dim_observation_objcat, exposure, objcat, objobs_complete, objobs_lightcurves, objobs_lightcurves_ssap, observation, observation_objcat from the bextract_jan18 schema, dim_exposure, dim_observation_objcat, exposure, objcat, objobs_complete, objobs_lightcurves, objobs_lightcurves_ssap, observation, observation_objcat from the bextract_dec17 schema, raw_images from the dk154_rawdata schema.

-----

**CSIRO ATOA TAP** https://atoavo.atnf.csiro.au/tap CSIRO Australia Telescope Online Archive TAP Service

-----

Table Access Protocol service for accessing Australia Telescope Online Archive

-----

**CSIRO ASKAP TAP** https://casda.csiro.au/casda_vo_tools/tap CSIRO ASKAP Science Data Archive TAP Service

-----

Table Access Protocol service for accessing catalogues from ASKAP radio astronomy observations

-----

**CSIRO Pulsar TAP** https://data.csiro.au/psrdavo/tap CSIRO Parkes Pulsar Data Archive

-----

Repository of pulsar observations made at the Parkes, Australia radio telescope

-----

**BIRA-IASB TAP** http://vespa-ae.oma.be/tap VESPA PA team server TAP service

-----

The VESPA PA team server's TAP end point. The Table Access
Protocol (TAP) lets you execute queries against our database tables,
inspect various metadata, and upload your own data. It is thus the
VO's premier way to access public data holdings.

Tables exposed through this endpoint include: epn_core from the gem_mars schema, obscore from the ivoa schema, epn_core from the nomad schema, epn_core from the soir schema, columns, groups, key_columns, keys, schemas, tables from the tap_schema schema.

-----

**ArVO Byu TAP** arvo-registry.sci.am/tap ArVO Byurakan TAP service

-----

The ArVO Byurakan's TAP end point. The Table Access
Protocol (TAP) lets you execute queries against our database tables,
inspect various metadata, and upload your own data. It is thus the
VO's premier way to access public data holdings.

Tables exposed through this endpoint include: columns, groups, key_columns, keys, schemas, tables from the tap_schema schema, main from the dfbsplates schema, spectra, ssa from the dfbsspec schema, obscore from the ivoa schema.

-----

**CADC TAP** https://ws.cadc-ccda.hia-iha.nrc-cnrc.gc.ca/argus CADC Archive Query Service

-----

Query service for observation metadata for all CADC archival data holdings. This service
                    provides Table Access Protocol (TAP) API access to observation metadata conforming to the
                    Common Archive Observation Model (CAOM) and the IVOA ObsCore data model.

                    The current dynamic collections (new data arriving) include: CFHT, CFHTMEGAPIPE, DAO, DRAO, GEMINI, HST,
                    JCMT, NEOSSAT, OMM, TESS, VLASS.

                    The current static collections include: APASS, BLAST, CFHTTERAPIX, CFHTWIRWOLF,
                    CGPS, DAOPLATES, FUSE, HSTHLA, IRIS, MACHO, MOST, NGVS, UKIRT, VGPS.

                    The curent external collections (metadata only, data served by original data centre) include:
                    CHANDRA, NOAO, SDSS, SUBARU, XMM.

-----

**YouCat** ws-cadc.canfar.net/youcat CANFAR User Catalogue Query Service

-----

YouCat is a query service for catalogues hosted by CANFAR. This service
                    provides Table Access Protocol (TAP) API access to catalogues created by
                    project teams.

                    YouCat also implements a prototype VOSI-tables extension that allows users
                    to create, update table metadata add table content (rows), create indices,
                    and delete tables in the database. Users can also control access to their
                    own tables (public to allow anonymous querying, protected so only members
                    of specified groups can query, and private where only the owner can query).

                    Users who want to create tables must request an allocation (schema) by email
                    to support@canfar.net.

                    Currently available catalogues include: VLASS, CFHTLS, KiDS, PAndAS, RCSLens.

-----

**AMDA** cdpp-epntap.irap.omp.eu/__system__/tap/run/tap Planetary and heliophysics plasma data at CDPP/AMDA

-----

Planetary and heliophysics plasma data at CDPP/AMDA

-----

**ILLU67P** cdpp-epntap.irap.omp.eu/__system__/tap/run/tap Illumination maps of 67P

-----

Illumination by the Sun of each face of the comet 67P/Churyumov-Gerasimenko based on the shape model
                CSHP_DV_130_01_LORES_OBJ.OBJ. The service provides the cosine between the normal of each face (in the same order as the faces defined in the shape model) and the Sun direction; both
                numerical values and images of the illumination are available. Each map is defined for a given position of the Sun
                in the frame of 67P (67P/C-G_CK). Longitude 0 is at the center of each map. The code is developed by A. Beth,
                Imperial College London, UK and the service is provided by CDPP (cdpp.eu). Acknowlegment: The illumination models
                have been developed at the Department of Physics at Imperial College London (UK) under the financial support of STFC
                grant of UK ST/N000692/1 and ESA contract 4000119035/16/ES/JD (Rosetta RPC-PIU). We would also like to warmly
                thank Bernhard Geiger (ESA) for his support in validating the 2D-illumination maps.

-----

**PSWS Transplanet** cdpp-epntap.irap.omp.eu/__system__/tap/run/tap Magnetosphere Ionosphere coupling simulation runs

-----

A Transplanet model of magnetosphere-ionosphere coupling  at Earth, Mars, and Jupiter

-----

**SIMBAD TAP** http://simbad.cds.unistra.fr/simbad/sim-tap SIMBAD TAP query engine

-----

This service provides TAP access to a simplified view of the SIMBAD database

-----

**VizieR ObsTAP** cdsarc.cds.unistra.fr/saadavizier.tap/tap TAP VizieR query engine

-----

This service provides ObsTAP access to VizieR spectra, time-series and images.

-----

**TAPVizieR** tapvizier.cds.unistra.fr/TAPVizieR/tap TAP VizieR query engine

-----

This service provides TAP access to a simplified view of the VizieR database

-----

**J-PLUS-DR1** https://archive.cefca.es/catalogues/jplus-dr1/tap_async.html J-PLUS DR1 Catalogue (July, 2018)

-----

J-PLUS DR1 Catalogue (July, 2018) is based on scientific images in 12 filters collected from November 2015 to January 2018 covering a total area of ~1020 square degrees. The Javalambre Photometric Local Universe Survey (J-PLUS) is an ongoing 12-band photometric optical survey, observing thousands of square degrees of the Northern Hemisphere from the dedicated JAST80 telescope at the Observatorio Astrofísico de Javalambre (OAJ, Teruel, Spain) . Please include the following in any published material that makes use of this data: "Based on observations made with the JAST80 telescope for the J-PLUS project at the Observatorio Astrofísico de Javalambre, in Teruel, owned, managed and operated by the Centro de Estudios de Física del Cosmos de Aragón."

-----

**J-PLUS-DR2** https://archive.cefca.es/catalogues/jplus-dr2/tap_async.html J-PLUS DR2 Catalogue (July, 2020)

-----

J-PLUS DR2 Catalogue (July, 2020) is based on scientific images in 12 filters collected from November 2015 to February 2020 covering a total area of ~2000 square degrees. The Javalambre Photometric Local Universe Survey (J-PLUS) is an ongoing 12-band photometric optical survey, observing thousands of square degrees of the Northern Hemisphere from the dedicated JAST80 telescope at the Observatorio Astrofísico de Javalambre (OAJ, Teruel, Spain) . Please include the following in any published material that makes use of this data: "Based on observations made with the JAST80 telescope for the J-PLUS project at the Observatorio Astrofísico de Javalambre, in Teruel, owned, managed and operated by the Centro de Estudios de Física del Cosmos de Aragón."

-----

**J-PLUS-DR3** https://archive.cefca.es/catalogues/jplus-dr3/tap_async.html J-PLUS DR3 Catalogue (July, 2022)

-----

J-PLUS DR3 Catalogue (July, 2022) is based on scientific images in 12 filters collected from November 2015 to February 2022 covering a total area of ~3000 square degrees. The Javalambre Photometric Local Universe Survey (J-PLUS) is an ongoing 12-band photometric optical survey, observing thousands of square degrees of the Northern Hemisphere from the dedicated JAST80 telescope at the Observatorio Astrofísico de Javalambre (OAJ, Teruel, Spain) . Please include the following in any published material that makes use of this data: "Based on observations made with the JAST80 telescope for the J-PLUS project at the Observatorio Astrofísico de Javalambre, in Teruel, owned, managed and operated by the Centro de Estudios de Física del Cosmos de Aragón."

-----

**MINJPASPDR201912** https://archive.cefca.es/catalogues/minijpas-pdr201912/tap_async.html MINIJ-PAS PDR201912 Catalogue (December, 2019)

-----

MINIJ-PAS PDR201912 Catalogue (December, 2019) is based on scientific images in 60 filters covering a total area of ~1 square degree. MiniJ-PAS is a 60-band photometric optical survey based on images collected by the JST250 telescope and the Pathfinder instrument at the Observatorio Astrofísico de Javalambre (OAJ, Teruel, Spain) . Please include the following in any published material that makes use of this data: "Based on observations made with the JST250 telescope and PathFinder camera for Mini J-PAS project at the Observatorio Astrofísico de Javalambre, in Teruel, owned, managed and operated by the Centro de Estudios de Física del Cosmos de Aragón."

-----

.. workaround for temporary unavailable urls

**ChiVO TAP** https vo.chivo.cl/tap ChiVO TAP service

-----

The ChiVO's TAP end point. The Table Access
Protocol (TAP) lets you execute queries against our database tables,
inspect various metadata, and upload your own data. It is thus the
VO's premier way to access public data holdings.

Tables exposed through this endpoint include: alma_fits from the alma_fits schema, m83_obs from the m83_test1 schema, m83_obs from the m83_data schema, hd163296band6 from the hd163296band6 schema, columns, groups, key_columns, keys, schemas, tables from the tap_schema schema, main from the arihip schema, main from the tgas schema, dr1 from the gaia schema, data from the openngc schema, emptyobscore, obscore from the ivoa schema.

-----

**CDA** https://cda.harvard.edu/cxctap Chandra X-ray Observatory Data Archive

-----

The Chandra X-ray Observatory is the U.S. follow-on to the Einstein
Observatory. Chandra was formerly known as AXAF, the Advanced X-ray
Astrophysics Facility, but renamed by NASA in December, 1998.
Originally three instruments and a high-resolution mirror carried in
one spacecraft, the project was reworked in 1992 and 1993. The Chandra
spacecraft carries a high resolution mirror, two imaging detectors,
and two sets of transmission gratings. Important Chandra features are:
an order of magnitude improvement in spatial resolution, good
sensitivity from 0.1 to 10 keV, and the capability for high spectral
resolution observations over most of this range.

-----

**CSC** http://cda.cfa.harvard.edu/csctap Chandra Source Catalog

-----

The Chandra X-ray Observatory is the U.S. follow-on to the Einstein
Observatory and one of NASA"s Great Observatories.
Chandra was formerly known as AXAF, the Advanced X-ray
Astrophysics Facility, but renamed by NASA in December, 1998.
Originally three instruments and a high-resolution mirror carried in
one spacecraft, the project was reworked in 1992 and 1993. The Chandra
spacecraft carries a high resolution mirror, two imaging detectors,
and two sets of transmission gratings. Important Chandra features are:
an order of magnitude improvement in spatial resolution, good
sensitivity from 0.1 to 10 keV, and the capability for high spectral
resolution observations over most of this range.

The Chandra Source Catalog (CSC) includes information about X-ray
sources detected in observations obtained using the Chandra X-ray Observatory.
Release 2.0 of the catalog includes 317,167 point, compact, and extended
sources detected in ACIS and HRC-I imaging observations released
publicly prior to the end of 2014.

Observed source positions and multi-band count rates are reported, as
well as numerous derived spatial, photometric, spectral, and temporal
calibrated source properties that may be compared with data obtained
by other telescopes. Each record includes the best estimates of the
properties of a source based on data extracted from all observations
in which the source was detected.

The Chandra Source Catalog is extracted from the CXC"s Chandra Data
Archive (CDA). The CXC should be acknowledged as the source of Chandra data.

For detailed information on the Chandra Observatory and datasets see:

http://cxc.harvard.edu/         for general Chandra information;

http://cxc.harvard.edu/cda/     for the Chandra Data Archive;

http://cxc.harvard.edu/csc/     for Chandra Source Catalog information.

-----

**CSCR1** http://cda.cfa.harvard.edu/csc1tap Chandra Source Catalog Release 1

-----

The Chandra X-ray Observatory is the U.S. follow-on to the Einstein
Observatory and one of NASA"s Great Observatories.
Chandra was formerly known as AXAF, the Advanced X-ray
Astrophysics Facility, but renamed by NASA in December, 1998.
Originally three instruments and a high-resolution mirror carried in
one spacecraft, the project was reworked in 1992 and 1993. The Chandra
spacecraft carries a high resolution mirror, two imaging detectors,
and two sets of transmission gratings. Important Chandra features are:
an order of magnitude improvement in spatial resolution, good
sensitivity from 0.1 to 10 keV, and the capability for high spectral
resolution observations over most of this range.

The Chandra Source Catalog (CSC) includes information about X-ray
sources detected in observations obtained using the Chandra X-ray
Observatory.  Release 1.1 of the catalog includes about 138,000 point
and compact sources with observed spatial extents less than ~30 arcsec
detected in a subset of ACIS and HRC-I imaging observations released
publicly prior to the end of 2009.

Observed source positions and multi-band count rates are reported, as
well as numerous derived spatial, photometric, spectral, and temporal
calibrated source properties that may be compared with data obtained
by other telescopes. Each record includes the best estimates of the
properties of a source based on data extracted from all observations
in which the source was detected.

The Chandra Source Catalog is extracted from the CXC"s Chandra Data
Archive (CDA). The CXC should be acknowledged as the source of Chandra data.

For detailed information on the Chandra Observatory and datasets see:

http://cxc.harvard.edu/         for general Chandra information;

http://cxc.harvard.edu/cda/     for the Chandra Data Archive;

http://cxc.harvard.edu/csc/     for Chandra Source Catalog information.

-----

**CSCR2** http://cda.cfa.harvard.edu/csc2tap Chandra Source Catalog Release 2

-----

The Chandra X-ray Observatory is the U.S. follow-on to the Einstein
Observatory and one of NASA"s Great Observatories.
Chandra was formerly known as AXAF, the Advanced X-ray
Astrophysics Facility, but renamed by NASA in December, 1998.
Originally three instruments and a high-resolution mirror carried in
one spacecraft, the project was reworked in 1992 and 1993. The Chandra
spacecraft carries a high resolution mirror, two imaging detectors,
and two sets of transmission gratings. Important Chandra features are:
an order of magnitude improvement in spatial resolution, good
sensitivity from 0.1 to 10 keV, and the capability for high spectral
resolution observations over most of this range.

The Chandra Source Catalog (CSC) includes information about X-ray
sources detected in observations obtained using the Chandra X-ray
Observatory.  Release 2.0 of the catalog includes 317,167 point,
compact, and extended sources detected in ACIS and HRC-I imaging
observations released publicly prior to the end of 2014.

Observed source positions and multi-band count rates are reported, as
well as numerous derived spatial, photometric, spectral, and temporal
calibrated source properties that may be compared with data obtained
by other telescopes. Each record includes the best estimates of the
properties of a source based on data extracted from all observations
in which the source was detected.

The Chandra Source Catalog is extracted from the CXC"s Chandra Data
Archive (CDA). The CXC should be acknowledged as the source of Chandra data.

For detailed information on the Chandra Observatory and datasets see:

http://cxc.harvard.edu/         for general Chandra information;

http://cxc.harvard.edu/cda/     for the Chandra Data Archive;

http://cxc.harvard.edu/csc/     for Chandra Source Catalog information.

-----

**Hubble/TAP** https://hst.esac.esa.int/tap-server/tap European HST Archive TAP

-----

This service provides access to observations and catalogs from the ESA Hubble Space Observatory mission hosted at the ESAC Science Data Centre

-----

**ESASky** https://sky.esa.int/esasky-tap/tap ESASky TAP

-----

ESASky is a science-driven discovery portal providing full access to the entire sky as observed with all ESA Space astronomy missions. This service provides access to catalogues, observations, and spectra hosted at the ESAC Science Data Centre.

-----

**ESASky Legacy** https://esaskylegacy.esac.esa.int/esasky-legacy-sl-tap/tap ESASky Legacy TAP

-----

ESASky legacy is a TAP service to provide the community with complete, self-standing catalogues and data collections from ESA legacy astronomy missions, ensuring long-term preservation. This service provides a unified access to data products and their successors that can be exposed by ESASky.

-----

**GAIA** https://gea.esac.esa.int/tap-server/tap Gaia TAP

-----

This service provides access to catalogues generated by the ESA Gaia mission hosted at the ESAC Science Data Centre

-----

**HREDA** https://hreda.esac.esa.int/hreda-sl-tap/tap HREDA TAP

-----

This service provides access to investigation for the HREDA archive hosted at the ESAC Science Data Centre

-----

**Herschel** http://archives.esac.esa.int/hsa/whsa-tap-server/tap Herschel TAP

-----

This service provides access to observations and catalogs from the ESA Herschel Space Observatory mission hosted at the ESAC Science Data Centre

-----

**ISLA** https://isla.esac.esa.int/tap/tap Integral Science Archive TAP

-----

ObsLocTAP and Integral observation resources

-----

**ISO TAP** http://nida.esac.esa.int/nida-sl-tap/tap Infrared Space Observatory (ISO) TAP

-----

This service provides access to tables and catalogues of the ISO ESA mission.
        				The Infrared Space Observatory (ISO) was the world's first true orbiting infrared observatory. Equipped with four highly-sophisticated and versatile scientific instruments, it was launched by Ariane in November 1995 and provided astronomers world-wide with a facility of unprecedented sensitivity and capabilities for a detailed exploration of the Universe at infrared wavelengths. The two spectrometers (SWS and LWS), a camera (ISOCAM) and an imaging photo-polarimeter (ISOPHOT) jointly covered wavelengths from 2.5 to around 240 microns with spatial resolutions ranging from 1.5 arcseconds (at the shortest wavelengths) to 90 arcseconds (at the longer wavelengths). Its 60 cm diameter telescope was cooled by superfluid liquid helium to temperatures of 2-4 K.

-----

**JWST** https://jwst.esac.esa.int/server/tap European JWST Archive TAP

-----

This service provides access to observations from the European JWST Science Archive hosted at the ESAC Science Data Centre.

-----

**PSA** https://archives.esac.esa.int/psa-tap/tap ESA PSA EPNTAP

-----

This service provides access to observations and catalogs from the ESA Planetary Science Archive hosted at the ESAC Science Data Centre

-----

**ESAVO TAP** https://registry.euro-vo.org/regtap/tap EURO-VO Registry TAP

-----

This is the TAP service for EuroVO Registry.

-----

**XMM** http://nxsa.esac.esa.int/tap-server/tap XMM-Newton data and catalogues

-----

This service provides access to XMM-Newton data and catalogues generated by the ESA XMM mission hosted at the ESAC Science Data Centre

-----

.. Workaround for temporary unavailable urls

*FAI NVO DC TAP** http vo.fai.kz/tap FAI archives TAP service

-----

The FAI archives's TAP end point. The Table Access
Protocol (TAP) lets you execute queries against our database tables,
inspect various metadata, and upload your own data. It is thus the
VO's premier way to access public data holdings.

Tables exposed through this endpoint include: main from the fai50mak schema, main from the fai_agn schema, main from the fai_schmidt_lc schema, main from the grb_photometry schema, obscore from the ivoa schema, columns, groups, key_columns, keys, schemas, tables from the tap_schema schema.

-----

**PRSFUB TAP** http://dachs.planet.fu-berlin.de/tap Planetary web services @ FUB TAP service

-----

The Planetary web services @ FUB's TAP end point. The Table Access
Protocol (TAP) lets you execute queries against our database tables,
inspect various metadata, and upload your own data. It is thus the
VO's premier way to access public data holdings.

Tables exposed through this endpoint include: columns, groups, key_columns, keys, schemas, tables from the tap_schema schema, epn_core from the hrsc3nd schema, emptyobscore, obscore from the ivoa schema.

    </help>
  <citations>
        <citation type="doi">
            10.3847/1538-4357/ac7c74
        </citation>
        <citation type="doi">
            10.3847/1538-3881/aabc4f
        </citation>
        <citation type="doi">
            10.5479/ADS/bib/2008ivoa.spec.1030O
        </citation>
        <citation type="doi">
            10.1051/0004-6361/201322068
        </citation>
        <citation type="bibtex">
        @ARTICLE{ivoa_arch,
           author = {Patrick Dowler and Janet Evans and Christophe Arviset and Severin Gaudet and Technical Coordination Group},
           title = {IVOA Architecture},
           url = {https://www.ivoa.net/documents/IVOAArchitecture/20211101/index.html},
           year = {2021},
           }
        </citation>
    </citations>
</tool>

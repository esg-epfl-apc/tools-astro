<tool id="mwa_astro_tool" name="MWA" version="0.0.4+galaxy0" profile="23.0">
  <requirements>
    <requirement type="package" version="8.20.0">ipython</requirement>
    <requirement type="package" version="5.3.4">astropy</requirement>
    <requirement type="package" version="1.1">gammapy</requirement>
    <requirement type="package" version="3.8.2">matplotlib</requirement>
    <requirement type="package" version="0.4.6">astroquery</requirement>
    <requirement type="package" version="1.12.0">scipy</requirement>
    <requirement type="package" version="1.2.7">oda-api</requirement>
    <requirement type="package" version="7.14.2">nbconvert</requirement>
    <requirement type="package" version="1.20.3">wget</requirement>
    <!--Requirements string 'nb2workflow[cwl,service,rdf,mmoda]>=1.3.30 
' can't be converted automatically. Please add the galaxy/conda requirement manually or modify the requirements file!-->
  </requirements>
  <command detect_errors="exit_code">ipython '$__tool_directory__/${_data_product._selector}.py'</command>
  <configfiles>
    <inputs name="inputs" filename="inputs.json" />
  </configfiles>
  <inputs>
    <conditional name="_data_product">
      <param name="_selector" type="select" label="Data Product">
        <option value="Image" selected="true">Image</option>
        <option value="Spectrum" selected="false">Spectrum</option>
      </param>
      <when value="Image">
        <param name="src_name" type="text" value="1ES 0229+200" label="src_name" />
        <param name="RA" type="float" value="38.202562" label="RA Units: deg" />
        <param name="DEC" type="float" value="20.288191" label="DEC Units: deg" />
        <param name="T1" type="text" value="2000-10-09T13:16:00.0" label="T1" />
        <param name="T2" type="text" value="2022-10-10T13:16:00.0" label="T2" />
        <param name="Radius" type="float" value="1.0" label="Radius Units: deg" />
        <param name="pixsize" type="float" value="0.01" label="pixsize Units: deg" />
        <param name="Frequency" type="select" label="Frequency">
          <option value="GLEAM 103-134 MHz">GLEAM 103-134 MHz</option>
          <option value="GLEAM 139-170 MHz">GLEAM 139-170 MHz</option>
          <option value="GLEAM 170-231 MHz" selected="true">GLEAM 170-231 MHz</option>
          <option value="GLEAM 72-103 MHz">GLEAM 72-103 MHz</option>
        </param>
      </when>
      <when value="Spectrum">
        <param name="src_name" type="text" value="1ES 0229+200" label="src_name" />
        <param name="RA" type="float" value="38.202562" label="RA Units: deg" />
        <param name="DEC" type="float" value="20.288191" label="DEC Units: deg" />
        <param name="T1" type="text" value="2000-10-09T13:16:00.0" label="T1" />
        <param name="T2" type="text" value="2022-10-10T13:16:00.0" label="T2" />
        <param name="Radius" type="float" value="0.05" label="Radius Units: deg" />
      </when>
    </conditional>
  </inputs>
  <outputs>
    <data label="${tool.name} -&gt; Image picture" name="out_Image_picture" format="auto" from_work_dir="picture_galaxy.output">
      <filter>_data_product['_selector'] == 'Image'</filter>
    </data>
    <data label="${tool.name} -&gt; Image image" name="out_Image_image" format="auto" from_work_dir="image_galaxy.output">
      <filter>_data_product['_selector'] == 'Image'</filter>
    </data>
    <data label="${tool.name} -&gt; Spectrum picture_png" name="out_Spectrum_picture_png" format="auto" from_work_dir="picture_png_galaxy.output">
      <filter>_data_product['_selector'] == 'Spectrum'</filter>
    </data>
    <data label="${tool.name} -&gt; Spectrum spectrum_astropy_table" name="out_Spectrum_spectrum_astropy_table" format="auto" from_work_dir="spectrum_astropy_table_galaxy.output">
      <filter>_data_product['_selector'] == 'Spectrum'</filter>
    </data>
  </outputs>
  <tests>
    <test expect_num_outputs="2">
      <conditional name="_data_product">
        <param name="_selector" value="Image" />
        <param name="src_name" value="1ES 0229+200" />
        <param name="RA" value="38.202562" />
        <param name="DEC" value="20.288191" />
        <param name="T1" value="2000-10-09T13:16:00.0" />
        <param name="T2" value="2022-10-10T13:16:00.0" />
        <param name="Radius" value="1.0" />
        <param name="pixsize" value="0.01" />
        <param name="Frequency" value="GLEAM 170-231 MHz" />
      </conditional>
      <assert_stdout>
        <has_text text="*** Job finished successfully ***" />
      </assert_stdout>
    </test>
    <test expect_num_outputs="2">
      <conditional name="_data_product">
        <param name="_selector" value="Spectrum" />
        <param name="src_name" value="1ES 0229+200" />
        <param name="RA" value="38.202562" />
        <param name="DEC" value="20.288191" />
        <param name="T1" value="2000-10-09T13:16:00.0" />
        <param name="T2" value="2022-10-10T13:16:00.0" />
        <param name="Radius" value="0.05" />
      </conditional>
      <assert_stdout>
        <has_text text="*** Job finished successfully ***" />
      </assert_stdout>
    </test>
  </tests>
  <help>This is help for MWA
</help>
  <citations>
    <citation type="bibtex">@article{2017MNRAS.464.1146H,
			author = {{Hurley-Walker}, N. and {Callingham}, J.~R. and {Hancock}, P.~J. and {Franzen}, T.~M.~O. and {Hindson}, L. and {Kapi{\'n}ska}, A.~D. and {Morgan}, J. and {Offringa}, A.~R. and {Wayth}, R.~B. and {Wu}, C. and {Zheng}, Q. and {Murphy}, T. and {Bell}, M.~E. and {Dwarakanath}, K.~S. and {For}, B. and {Gaensler}, B.~M. and {Johnston-Hollitt}, M. and {Lenc}, E. and {Procopio}, P. and {Staveley-Smith}, L. and {Ekers}, R. and {Bowman}, J.~D. and {Briggs}, F. and {Cappallo}, R.~J. and {Deshpande}, A.~A. and {Greenhill}, L. and {Hazelton}, B.~J. and {Kaplan}, D.~L. and {Lonsdale}, C.~J. and {McWhirter}, S.~R. and {Mitchell}, D.~A. and {Morales}, M.~F. and {Morgan}, E. and {Oberoi}, D. and {Ord}, S.~M. and {Prabu}, T. and {Shankar}, N. Udaya and {Srivani}, K.~S. and {Subrahmanyan}, R. and {Tingay}, S.~J. and {Webster}, R.~L. and {Williams}, A. and {Williams}, C.~L.},
			title = {{GaLactic and Extragalactic All-sky Murchison Widefield Array (GLEAM) survey - I. A low-frequency extragalactic catalogue}},
			journal = {\mnras},
			keywords = {techniques: interferometric, surveys, galaxies: general, Astrophysics - Astrophysics of Galaxies},
			year = {2017},
			month = {jan},
			volume = {464},
			number = {1},
			pages = {1146-1167},
			doi = {10.1093/mnras/stw2337},
			archivePrefix = {arXiv},
			eprint = {1610.08318},
			primaryClass = {astro-ph.GA},
			adsurl = {https://ui.adsabs.harvard.edu/abs/2017MNRAS.464.1146H},
			adsnote = {Provided by the SAO/NASA Astrophysics Data System}
		}</citation>
  </citations>
</tool>
<tool id="photoz_euclid_astro_tool" name="PhotoZ_Euclid" version="0.0.1+galaxy0" profile="23.0">
  <requirements>
    <requirement type="package" version="2.0.10">phosphoros</requirement>
    <requirement type="package" version="1.21.4">wget</requirement>
    <requirement type="package" version="9.0.2">ipython</requirement>
    <requirement type="package" version="0.7.0">jupyter_contrib_nbextensions</requirement>
    <!--Requirements string 'jupyterlab-novnc
' can't be converted automatically. Please add the galaxy/conda requirement manually or modify the requirements file!-->
    <requirement type="package" version="1.26.4">numpy</requirement>
    <requirement type="package" version="7.0.1">astropy</requirement>
    <requirement type="package" version="3.9.1">matplotlib</requirement>
    <requirement type="package" version="1.0.14">dustmaps</requirement>
    <!--Requirements string 'nb2workflow
' can't be converted automatically. Please add the galaxy/conda requirement manually or modify the requirements file!-->
    <requirement type="package" version="1.2.28">oda-api</requirement>
  </requirements>
  <command detect_errors="exit_code">ipython '$__tool_directory__/Run_Phosphoros_on_Catalog.py'</command>
  <configfiles>
    <inputs name="inputs" filename="inputs.json" data_style="paths" />
  </configfiles>
  <environment_variables>
    <environment_variable name="BASEDIR">$__tool_directory__</environment_variable>
    <environment_variable name="GALAXY_TOOL_DIR">$__tool_directory__</environment_variable>
  </environment_variables>
  <inputs>
    <param name="catalog_URL" type="data" label="" format="data" />
    <param name="filters_table" type="data" label="filters_table" format="json" />
    <param name="ab_magnitude" type="select" label="Flux [microJy] or AB Magnitude">
      <option value="Flux" selected="true">Flux</option>
      <option value="Magnitude">Magnitude</option>
    </param>
    <param name="object_type" type="select" label="Object Type">
      <option value="Galaxy" selected="true">Galaxy</option>
      <option value="HighZ">HighZ</option>
      <option value="QSO">QSO</option>
      <option value="Star">Star</option>
    </param>
    <param name="skip_sources" type="integer" value="0" label="Skip the first N sources" />
    <param name="proc_sources" type="integer" value="0" label="N sources to process (all if = 0)" />
    <param name="column_name_MW_EBV" type="text" value="" label="E(B-V)" />
    <param name="column_name_RA" type="text" value="" label="Right Ascension" />
    <param name="column_name_DEC" type="text" value="" label="Declination" />
    <param name="priors" type="select" label="Priors (only for Galaxies)">
      <option value="None" selected="true">None</option>
      <option value="Redshift (Benitez 2000)">Redshift (Benitez 2000)</option>
      <option value="Top-Hat LF">Top-Hat LF</option>
      <option value="Volume">Volume</option>
    </param>
    <param name="column_name_Nz_prior_I" type="text" value="" label="Redshift Prior: I Band" />
    <param name="column_name_Ztrue" type="text" value="" label="Spectroscopic (Reference) Redshift" />
    <param name="ZP_correction" type="select" label="Zero Point Correction">
      <option value="False">False</option>
      <option value="True">True</option>
    </param>
    <param name="PDZ_output" type="select" label="Output: Redshift PDF">
      <option value="False">False</option>
      <option value="True">True</option>
    </param>
  </inputs>
  <outputs>
    <data label="${tool.name} -&gt; Run_Phosphoros_on_Catalog output_catalog" name="out_Run_Phosphoros_on_Catalog_output_catalog" format="auto" from_work_dir="output_catalog_galaxy.output" />
    <data label="${tool.name} -&gt; Run_Phosphoros_on_Catalog z_hist" name="out_Run_Phosphoros_on_Catalog_z_hist" format="auto" from_work_dir="z_hist_galaxy.output" />
    <data label="${tool.name} -&gt; Run_Phosphoros_on_Catalog output_zpc" name="out_Run_Phosphoros_on_Catalog_output_zpc" format="auto" from_work_dir="output_zpc_galaxy.output" />
  </outputs>
  <tests>
    <test expect_num_outputs="3">
      <param name="catalog_URL" location="https://www.astro.unige.ch/~tucci/Phosphoros/MultiBands_Catalog_1k.fits" />
      <param name="filters_table" value="filters_table.json" />
      <param name="ab_magnitude" value="Flux" />
      <param name="object_type" value="Galaxy" />
      <param name="skip_sources" value="0" />
      <param name="proc_sources" value="0" />
      <param name="column_name_MW_EBV" value="" />
      <param name="column_name_RA" value="" />
      <param name="column_name_DEC" value="" />
      <param name="priors" value="None" />
      <param name="column_name_Nz_prior_I" value="" />
      <param name="column_name_Ztrue" value="" />
      <param name="ZP_correction" value="False" />
      <param name="PDZ_output" value="False" />
      <assert_stdout>
        <has_text text="*** Job finished successfully ***" />
      </assert_stdout>
    </test>
  </tests>
  <help>Dummy tool help text.
</help>
</tool>
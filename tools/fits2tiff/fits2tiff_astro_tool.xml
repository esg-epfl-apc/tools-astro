<tool id="fits2tiff_astro_tool" name="fits2tiff" version="0.0.1+galaxy0" profile="24.0">
  <requirements>
    <requirement type="package" version="6.1.7">astropy</requirement>
    <requirement type="package" version="2025.6.11">tifffile</requirement>
  </requirements>
  <command detect_errors="exit_code">python '$__tool_directory__/fits2tiff.py'</command>
  <environment_variables>
    <environment_variable name="BASEDIR">$__tool_directory__</environment_variable>
    <environment_variable name="GALAXY_TOOL_DIR">$__tool_directory__</environment_variable>
  </environment_variables>
  <configfiles>
    <inputs name="inputs" filename="inputs.json" data_style="paths" />
  </configfiles>
  <inputs>
    <param name="file_input" type="data" label="Input file" format="data" optional="false" />
    <param name="input_hdu_no" type="integer" value="0" label="input_hdu_no" optional="false" />
  </inputs>
  <outputs>
    <data label="${tool.name} -&gt; fits2tiff file_output" name="out_fits2tiff_file_output" format="auto" from_work_dir="file_output_galaxy.output" />
    <data label="${tool.name} -&gt; fits2tiff header_json" name="out_fits2tiff_header_json" format="auto" from_work_dir="header_json_galaxy.output" />
  </outputs>
  <tests>
    <test expect_num_outputs="2">
      <param name="file_input" value="file_input.json" />
      <param name="input_hdu_no" value="0" />
      <assert_stdout>
        <has_text text="*** Job finished successfully ***" />
      </assert_stdout>
    </test>
  </tests>
  <help>This tool converts images stored in FITS files to TIFF format. If the
FITS file contains multiple HDUs, the desired HDU index can be
specified. The image data itself is not altered during the conversion.

In addition to the TIFF file, the tool also outputs a JSON file
containing the metadata from the header of the selected FITS HDU.
</help>
  <citations>
    <citation type="bibtex">@article{astropy:2013,
			Adsnote = {Provided by the SAO/NASA Astrophysics Data System},
			Adsurl = {http://adsabs.harvard.edu/abs/2013A%26A...558A..33A},
			Archiveprefix = {arXiv},
			Author = {{Astropy Collaboration} and {Robitaille}, T.~P. and {Tollerud}, E.~J. and {Greenfield}, P. and {Droettboom}, M. and {Bray}, E. and {Aldcroft}, T. and {Davis}, M. and {Ginsburg}, A. and {Price-Whelan}, A.~M. and {Kerzendorf}, W.~E. and {Conley}, A. and {Crighton}, N. and {Barbary}, K. and {Muna}, D. and {Ferguson}, H. and {Grollier}, F. and {Parikh}, M.~M. and {Nair}, P.~H. and {Unther}, H.~M. and {Deil}, C. and {Woillez}, J. and {Conseil}, S. and {Kramer}, R. and {Turner}, J.~E.~H. and {Singer}, L. and {Fox}, R. and {Weaver}, B.~A. and {Zabalza}, V. and {Edwards}, Z.~I. and {Azalee Bostroem}, K. and {Burke}, D.~J. and {Casey}, A.~R. and {Crawford}, S.~M. and {Dencheva}, N. and {Ely}, J. and {Jenness}, T. and {Labrie}, K. and {Lim}, P.~L. and {Pierfederici}, F. and {Pontzen}, A. and {Ptak}, A. and {Refsdal}, B. and {Servillat}, M. and {Streicher}, O.},
			Doi = {10.1051/0004-6361/201322068},
			Eid = {A33},
			Eprint = {1307.6212},
			Journal = {\aap},
			Keywords = {methods: data analysis, methods: miscellaneous, virtual observatory tools},
			Month = {oct},
			Pages = {A33},
			Primaryclass = {astro-ph.IM},
			Title = {{Astropy: A community Python package for astronomy}},
			Volume = {558},
			Year = {2013},
			Bdsk-Url-1 = {https://dx.doi.org/10.1051/0004-6361/201322068}
		}</citation>
    <citation type="doi">10.3847/1538-3881/aabc4f</citation>
    <citation type="doi">10.3847/1538-4357/ac7c74</citation>
    <citation type="doi">10.5281/zenodo.15645336</citation>
  </citations>
</tool>
<tool id="gallery_astro_tool" name="Gallery" version="0.0.1+galaxy0" profile="23.0">
  <requirements>
    <requirement type="package" version="8.31.0">ipython</requirement>
    <requirement type="package" version="7.0.0">astropy</requirement>
    <requirement type="package" version="2.2.2">numpy</requirement>
    <requirement type="package" version="1.15.1">scipy</requirement>
    <requirement type="package" version="2.30.1">iminuit</requirement>
    <requirement type="package" version="3.10.0">matplotlib</requirement>
    <requirement type="package" version="1.21.4">wget</requirement>
    <requirement type="package" version="0.70.17">multiprocess</requirement>
    <requirement type="package" version="1.3">gammapy</requirement>
    <requirement type="package" version="1.2.27">oda-api</requirement>
    <!--Requirements string 'nb2workflow[cwl,service,rdf,mmoda]>=1.3.30 
' can't be converted automatically. Please add the galaxy/conda requirement manually or modify the requirements file!-->
    <requirement type="package" version="7.16.5">nbconvert</requirement>
  </requirements>
  <command detect_errors="exit_code">ipython '$__tool_directory__/${_data_product._selector}.py'</command>
  <configfiles>
    <inputs name="inputs" filename="inputs.json" data_style="paths" />
  </configfiles>
  <inputs>
    <conditional name="_data_product">
      <param name="_selector" type="select" label="Data Product">
        <option value="2405.07746_Fig4" selected="true">2405.07746_Fig4</option>
        <option value="Multi-instrument_spectrum" selected="false">Multi-instrument_spectrum</option>
        <option value="2411.01640_Fig2" selected="false">2411.01640_Fig2</option>
      </param>
      <when value="2405.07746_Fig4">
        <param name="T_star" type="float" value="0.178" label="Phase transition temperature (unit: GeV)" />
        <param name="g_star" type="integer" value="20" label="Number of effective degrees of freedom" />
        <param name="alpha" type="float" value="1.0" label="alpha: latent heat in units of radiation density" />
        <param name="beta_H" type="float" value="3.3" label="beta: phase transition rate in units of Hubble rate" />
        <param name="epsilon_turb" type="float" value="1" label="fraction of energy release in turbulence" />
        <param name="v_w" type="float" value="0.999" label="ternminal velocity of bubles" />
        <param name="h" type="float" value="0.7" label="Hubble parameter" />
        <param name="Parameterisation" type="select" label="model parameterisation">
          <option value="Lewicki2022">Lewicki2022</option>
          <option value="RoperPol2023" selected="true">RoperPol2023</option>
        </param>
      </when>
      <when value="Multi-instrument_spectrum">
        <param name="src_name" type="text" value="Mrk 421" label="src_name" />
        <param name="RA" type="float" value="166.113809" label="RA (unit: deg)" />
        <param name="DEC" type="float" value="38.208833" label="DEC (unit: deg)" />
        <param name="T1" type="text" value="2000-10-09T13:16:00.0" label="T1" />
        <param name="T2" type="text" value="2021-10-13T13:16:00.0" label="T2" />
        <param name="do_jemx" type="boolean" checked="true" label="INTEGRAL/JEM-X" />
        <param name="do_isgri" type="boolean" checked="true" label="INTEGRAL/ISGRI" />
        <param name="do_fermi" type="boolean" checked="true" label="Fermi/LAT" />
        <param name="do_magic" type="boolean" checked="true" label="MAGIC" />
        <param name="do_icecube" type="boolean" checked="true" label="IceCube" />
        <param name="do_auger" type="boolean" checked="true" label="Auger" />
        <param name="do_hess" type="boolean" checked="true" label="HESS" />
        <param name="do_gaia" type="boolean" checked="true" label="GAIA" />
        <param name="do_legacysurvey" type="boolean" checked="true" label="DESI Legacy Survey" />
      </when>
      <when value="2411.01640_Fig2">
        <param name="redshift" type="float" value="0.9" label="redshift" />
        <param name="B" type="float" value="3e-08" label="Magnetic field [G]" />
        <param name="Ecut" type="float" value="28200000000.0" label="Cutoff energy (unit: eV)" />
        <param name="Slope" type="float" value="2.0" label="Slope of the spectrum" />
      </when>
    </conditional>
  </inputs>
  <outputs>
    <data label="${tool.name} -&gt; 2405.07746_Fig4 png" name="out_2405.07746_Fig4_png" format="auto" from_work_dir="png_galaxy.output">
      <filter>_data_product['_selector'] == '2405.07746_Fig4'</filter>
    </data>
    <data label="${tool.name} -&gt; Multi-instrument_spectrum sed_png" name="out_Multi_instrument_spectrum_sed_png" format="auto" from_work_dir="sed_png_galaxy.output">
      <filter>_data_product['_selector'] == 'Multi-instrument_spectrum'</filter>
    </data>
    <data label="${tool.name} -&gt; 2411.01640_Fig2 png" name="out_2411.01640_Fig2_png" format="auto" from_work_dir="png_galaxy.output">
      <filter>_data_product['_selector'] == '2411.01640_Fig2'</filter>
    </data>
  </outputs>
  <tests>
    <test expect_num_outputs="1">
      <conditional name="_data_product">
        <param name="_selector" value="2405.07746_Fig4" />
        <param name="T_star" value="0.178" />
        <param name="g_star" value="20" />
        <param name="alpha" value="1.0" />
        <param name="beta_H" value="3.3" />
        <param name="epsilon_turb" value="1" />
        <param name="v_w" value="0.999" />
        <param name="h" value="0.7" />
        <param name="Parameterisation" value="RoperPol2023" />
      </conditional>
      <assert_stdout>
        <has_text text="*** Job finished successfully ***" />
      </assert_stdout>
    </test>
    <test expect_num_outputs="1">
      <conditional name="_data_product">
        <param name="_selector" value="Multi-instrument_spectrum" />
        <param name="src_name" value="Mrk 421" />
        <param name="RA" value="166.113809" />
        <param name="DEC" value="38.208833" />
        <param name="T1" value="2000-10-09T13:16:00.0" />
        <param name="T2" value="2021-10-13T13:16:00.0" />
        <param name="do_jemx" value="True" />
        <param name="do_isgri" value="True" />
        <param name="do_fermi" value="True" />
        <param name="do_magic" value="True" />
        <param name="do_icecube" value="True" />
        <param name="do_auger" value="True" />
        <param name="do_hess" value="True" />
        <param name="do_gaia" value="True" />
        <param name="do_legacysurvey" value="True" />
      </conditional>
      <assert_stdout>
        <has_text text="*** Job finished successfully ***" />
      </assert_stdout>
    </test>
    <test expect_num_outputs="1">
      <conditional name="_data_product">
        <param name="_selector" value="2411.01640_Fig2" />
        <param name="redshift" value="0.9" />
        <param name="B" value="3e-08" />
        <param name="Ecut" value="28200000000.0" />
        <param name="Slope" value="2.0" />
      </conditional>
      <assert_stdout>
        <has_text text="*** Job finished successfully ***" />
      </assert_stdout>
    </test>
  </tests>
  <environment_variables>
    <environment_variable name="BASEDIR">$__tool_directory__</environment_variable>
    <environment_variable name="GALAXY_TOOL_DIR">$__tool_directory__</environment_variable>
  </environment_variables>
</tool>
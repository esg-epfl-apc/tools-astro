<tool id="hess_astro_tool" name="HESS" version="0.0.1+galaxy0" profile="23.0">
  <requirements>
    <requirement type="package" version="8.21.0">ipython</requirement>
    <requirement type="package" version="1.1">gammapy</requirement>
    <requirement type="package" version="3.8.2">matplotlib</requirement>
    <requirement type="package" version="1.2.7">oda-api</requirement>
    <requirement type="package" version="7.14.2">nbconvert</requirement>
    <requirement type="package" version="1.20.3">wget</requirement>
    <requirement type="package" version="5.3.4">astropy</requirement>
    <requirement type="package" version="1.11.4">scipy</requirement>
    <!--Requirements string 'nb2workflow[cwl,service,rdf,mmoda]>=1.3.30 
' can't be converted automatically. Please add the galaxy/conda requirement manually or modify the requirements file!-->
  </requirements>
  <command detect_errors="exit_code">ipython '$__tool_directory__/${_data_product._selector}.py'</command>
  <configfiles>
    <inputs name="inputs" filename="inputs.json" />
  </configfiles>
  <inputs>
    <conditional name="_data_product">
      <param name="_selector" type="select" label="Data Product">
        <option value="Image" selected="true">Image</option>
        <option value="Spectrum" selected="false">Spectrum</option>
        <option value="Spectrum_folded" selected="false">Spectrum_folded</option>
        <option value="Lightcurve" selected="false">Lightcurve</option>
      </param>
      <when value="Image">
        <param name="src_name" type="text" value="Crab" label="src_name" />
        <param name="RA" type="float" value="83.6287" label="RA Units: deg" />
        <param name="DEC" type="float" value="22.0147" label="DEC Units: deg" />
        <param name="T1" type="text" value="2000-10-09T13:16:00.0" label="T1" />
        <param name="T2" type="text" value="2022-10-10T13:16:00.0" label="T2" />
        <param name="Radius" type="float" value="2.5" label="Radius Units: deg" />
        <param name="pixsize" type="float" value="0.1" label="pixsize Units: deg" />
        <param name="Emin" type="float" value="100.0" label="Emin Units: GeV" />
        <param name="Emax" type="float" value="10000.0" label="Emax Units: GeV" />
      </when>
      <when value="Spectrum">
        <param name="src_name" type="text" value="Crab" label="src_name" />
        <param name="RA" type="float" value="83.6287" label="RA Units: deg" />
        <param name="DEC" type="float" value="22.0147" label="DEC Units: deg" />
        <param name="T1" type="text" value="2000-10-09T13:16:00.0" label="T1" />
        <param name="T2" type="text" value="2022-10-10T13:16:00.0" label="T2" />
        <param name="Radius" type="float" value="2.5" label="Radius Units: deg" />
        <param name="R_s" type="float" value="0.2" label="R_s Units: deg" />
        <param name="Emin" type="float" value="100.0" label="Emin Units: GeV" />
        <param name="Emax" type="float" value="10000.0" label="Emax Units: GeV" />
        <param name="NEbins" type="integer" value="20" label="NEbins" />
      </when>
      <when value="Spectrum_folded">
        <param name="src_name" type="text" value="Crab" label="src_name" />
        <param name="RA" type="float" value="83.6287" label="RA Units: deg" />
        <param name="DEC" type="float" value="22.0147" label="DEC Units: deg" />
        <param name="T1" type="text" value="2000-10-09T13:16:00.0" label="T1" />
        <param name="T2" type="text" value="2022-10-10T13:16:00.0" label="T2" />
        <param name="Radius" type="float" value="2.5" label="Radius Units: deg" />
        <param name="R_s" type="float" value="0.2" label="R_s Units: deg" />
        <param name="Emin" type="float" value="100.0" label="Emin Units: GeV" />
        <param name="Emax" type="float" value="10000.0" label="Emax Units: GeV" />
        <param name="NEbins" type="integer" value="20" label="NEbins" />
      </when>
      <when value="Lightcurve">
        <param name="src_name" type="text" value="Crab" label="src_name" />
        <param name="RA" type="float" value="83.6287" label="RA Units: deg" />
        <param name="DEC" type="float" value="22.0147" label="DEC Units: deg" />
        <param name="T1" type="text" value="2003-10-09T13:16:00.0" label="T1" />
        <param name="T2" type="text" value="2005-10-10T13:16:00.0" label="T2" />
        <param name="Radius" type="float" value="2.5" label="Radius Units: deg" />
        <param name="R_s" type="float" value="0.2" label="R_s Units: deg" />
        <param name="Emin" type="float" value="100.0" label="Emin Units: GeV" />
        <param name="Emax" type="float" value="10000.0" label="Emax Units: GeV" />
        <param name="NTbins" type="integer" value="2" label="NTbins" />
      </when>
    </conditional>
  </inputs>
  <outputs>
    <data label="${tool.name} -&gt; Image picture" name="out_Image_picture" format="auto" from_work_dir="picture_galaxy.output">
      <filter>_data_product['_selector'] == 'Image'</filter>
    </data>
    <data label="${tool.name} -&gt; Image image" name="out_Image_image" format="auto" from_work_dir="image_galaxy.output">
      <filter>_data_product['_selector'] == 'Image'</filter>
    </data>
    <data label="${tool.name} -&gt; Spectrum picture_png" name="out_Spectrum_picture_png" format="auto" from_work_dir="picture_png_galaxy.output">
      <filter>_data_product['_selector'] == 'Spectrum'</filter>
    </data>
    <data label="${tool.name} -&gt; Spectrum spectrum_astropy_table" name="out_Spectrum_spectrum_astropy_table" format="auto" from_work_dir="spectrum_astropy_table_galaxy.output">
      <filter>_data_product['_selector'] == 'Spectrum'</filter>
    </data>
    <data label="${tool.name} -&gt; Spectrum_folded picture_png" name="out_Spectrum_folded_picture_png" format="auto" from_work_dir="picture_png_galaxy.output">
      <filter>_data_product['_selector'] == 'Spectrum_folded'</filter>
    </data>
    <data label="${tool.name} -&gt; Spectrum_folded spectrum_astropy_table" name="out_Spectrum_folded_spectrum_astropy_table" format="auto" from_work_dir="spectrum_astropy_table_galaxy.output">
      <filter>_data_product['_selector'] == 'Spectrum_folded'</filter>
    </data>
    <data label="${tool.name} -&gt; Lightcurve picture" name="out_Lightcurve_picture" format="auto" from_work_dir="picture_galaxy.output">
      <filter>_data_product['_selector'] == 'Lightcurve'</filter>
    </data>
    <data label="${tool.name} -&gt; Lightcurve lightcurve_astropy_table" name="out_Lightcurve_lightcurve_astropy_table" format="auto" from_work_dir="lightcurve_astropy_table_galaxy.output">
      <filter>_data_product['_selector'] == 'Lightcurve'</filter>
    </data>
  </outputs>
  <tests>
    <test expect_num_outputs="2">
      <conditional name="_data_product">
        <param name="_selector" value="Image" />
        <param name="src_name" value="Crab" />
        <param name="RA" value="83.6287" />
        <param name="DEC" value="22.0147" />
        <param name="T1" value="2000-10-09T13:16:00.0" />
        <param name="T2" value="2022-10-10T13:16:00.0" />
        <param name="Radius" value="2.5" />
        <param name="pixsize" value="0.1" />
        <param name="Emin" value="100.0" />
        <param name="Emax" value="10000.0" />
      </conditional>
      <assert_stdout>
        <has_text text="*** Job finished successfully ***" />
      </assert_stdout>
    </test>
    <test expect_num_outputs="2">
      <conditional name="_data_product">
        <param name="_selector" value="Spectrum" />
        <param name="src_name" value="Crab" />
        <param name="RA" value="83.6287" />
        <param name="DEC" value="22.0147" />
        <param name="T1" value="2000-10-09T13:16:00.0" />
        <param name="T2" value="2022-10-10T13:16:00.0" />
        <param name="Radius" value="2.5" />
        <param name="R_s" value="0.2" />
        <param name="Emin" value="100.0" />
        <param name="Emax" value="10000.0" />
        <param name="NEbins" value="20" />
      </conditional>
      <assert_stdout>
        <has_text text="*** Job finished successfully ***" />
      </assert_stdout>
    </test>
    <test expect_num_outputs="2">
      <conditional name="_data_product">
        <param name="_selector" value="Spectrum_folded" />
        <param name="src_name" value="Crab" />
        <param name="RA" value="83.6287" />
        <param name="DEC" value="22.0147" />
        <param name="T1" value="2000-10-09T13:16:00.0" />
        <param name="T2" value="2022-10-10T13:16:00.0" />
        <param name="Radius" value="2.5" />
        <param name="R_s" value="0.2" />
        <param name="Emin" value="100.0" />
        <param name="Emax" value="10000.0" />
        <param name="NEbins" value="20" />
      </conditional>
      <assert_stdout>
        <has_text text="*** Job finished successfully ***" />
      </assert_stdout>
    </test>
    <test expect_num_outputs="2">
      <conditional name="_data_product">
        <param name="_selector" value="Lightcurve" />
        <param name="src_name" value="Crab" />
        <param name="RA" value="83.6287" />
        <param name="DEC" value="22.0147" />
        <param name="T1" value="2003-10-09T13:16:00.0" />
        <param name="T2" value="2005-10-10T13:16:00.0" />
        <param name="Radius" value="2.5" />
        <param name="R_s" value="0.2" />
        <param name="Emin" value="100.0" />
        <param name="Emax" value="10000.0" />
        <param name="NTbins" value="2" />
      </conditional>
      <assert_stdout>
        <has_text text="*** Job finished successfully ***" />
      </assert_stdout>
    </test>
  </tests>
  <help>Tool for HESS analysis in Galaxy&#8230;
</help>
</tool>